import{c as w,a as h,I as i}from"./assets/RowActions-2sfIqMRK.js";/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M4 19l16 0",key:"svg-0"}],["path",{d:"M4 15l4 -6l4 2l4 -5l4 4",key:"svg-1"}]],M=w("outline","chart-line","ChartLine",_);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"M3 17l6 -6l4 4l8 -8",key:"svg-0"}],["path",{d:"M14 7l7 0l0 7",key:"svg-1"}]],z=w("outline","trending-up","TrendingUp",k),C=window.React.useEffect,l=window.React.useState,d=window.MantineCore.Alert,g=window.MantineCore.Badge,c=window.MantineCore.Card,r=window.MantineCore.Group,S=window.MantineCore.LoadingOverlay,x=window.MantineCore.SimpleGrid,E=window.MantineCore.Stack,e=window.MantineCore.Text,P=window.MantineCore.Title;function v({context:n}){const[t,y]=l(null),[p,s]=l(!0),[m,u]=l(null),o=n.context?.api_url,R=n.context?.part_id;C(()=>{if(!o||!R){u("Configuration error: Missing API URL or Part ID"),s(!1);return}fetch(o,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then(a=>{if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return a.json()}).then(a=>{y(a),s(!1)}).catch(a=>{console.error("Error fetching ROP details:",a),u(`Failed to load ROP data: ${a.message}`),s(!1)})},[o,R]);const f=a=>{switch(a.toLowerCase()){case"critical":return"red";case"low":return"orange";case"adequate":return"green";case"excess":return"blue";default:return"gray"}};return p?React.createElement("div",{style:{position:"relative",minHeight:200}},React.createElement(S,{visible:!0}),React.createElement(e,{ta:"center",mt:"xl"},"Loading ROP analysis...")):m?React.createElement(d,{icon:React.createElement(i,{size:"1rem"}),title:"Error",color:"red"},m):t?React.createElement(E,{gap:"md"},React.createElement(r,{justify:"space-between"},React.createElement(P,{order:3},React.createElement(M,{size:"1.5rem",style:{marginRight:8,verticalAlign:"middle"}}),"Reorder Point Analysis"),React.createElement(g,{size:"lg",color:f(t.status)},t.status)),React.createElement(x,{cols:2,spacing:"md"},React.createElement(c,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0},React.createElement(e,{size:"sm",c:"dimmed"},"Current Stock"),React.createElement(e,{size:"xl",fw:700},Math.round(t.current_stock))),React.createElement(c,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0},React.createElement(e,{size:"sm",c:"dimmed"},"Reorder Point"),React.createElement(e,{size:"xl",fw:700,c:"blue"},Math.round(t.reorder_point))),React.createElement(c,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0},React.createElement(e,{size:"sm",c:"dimmed"},"Safety Stock"),React.createElement(e,{size:"xl",fw:700},Math.round(t.safety_stock))),React.createElement(c,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0},React.createElement(e,{size:"sm",c:"dimmed"},"Max Stock Level"),React.createElement(e,{size:"xl",fw:700},Math.round(t.max_stock)))),React.createElement(c,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0},React.createElement(E,{gap:"sm"},React.createElement(r,{justify:"space-between"},React.createElement(e,{fw:600},"Demand Analysis"),React.createElement(z,{size:"1.2rem"})),React.createElement(r,{justify:"space-between"},React.createElement(e,{size:"sm"},"Daily Demand Rate:"),React.createElement(e,{fw:600},t.demand_rate.toFixed(2)," units/day")),React.createElement(r,{justify:"space-between"},React.createElement(e,{size:"sm"},"Lead Time:"),React.createElement(e,{fw:600},t.lead_time_days," days")),t.days_until_stockout!==null&&React.createElement(r,{justify:"space-between"},React.createElement(e,{size:"sm"},"Days Until Stockout:"),React.createElement(e,{fw:700,c:t.days_until_stockout<=7?"red":t.days_until_stockout<=14?"orange":"green"},t.days_until_stockout<=0?"NOW":`${Math.round(t.days_until_stockout)} days`)),React.createElement(r,{justify:"space-between"},React.createElement(e,{size:"sm"},"Urgency Score:"),React.createElement(g,{color:t.urgency_score>=80?"red":t.urgency_score>=60?"orange":"green"},Math.round(t.urgency_score))))),t.suggested_order_qty>0&&React.createElement(d,{icon:React.createElement(i,{size:"1rem"}),title:"Reorder Recommended",color:"orange"},React.createElement(e,null,"Suggested Order Quantity: ",React.createElement(e,{component:"span",fw:700,c:"green"},Math.round(t.suggested_order_qty))," units"),React.createElement(e,{size:"sm",c:"dimmed",mt:"xs"},"Last calculated: ",new Date(t.last_calculated).toLocaleString()))):React.createElement(d,{icon:React.createElement(i,{size:"1rem"}),title:"No Data",color:"yellow"},React.createElement(e,null,"No ROP analysis available for this part. Ensure sufficient stock history exists."))}function T(n){return h(n),React.createElement(v,{context:n})}export{T as renderROPAnalysisPanel};
//# sourceMappingURL=Panel.js.map
