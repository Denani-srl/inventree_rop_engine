import{c as h,a as M,I as u}from"./assets/RowActions-2sfIqMRK.js";/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M4 19l16 0",key:"svg-0"}],["path",{d:"M4 15l4 -6l4 2l4 -5l4 4",key:"svg-1"}]],f=h("outline","chart-line","ChartLine",S);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=[["path",{d:"M3 17l6 -6l4 4l8 -8",key:"svg-0"}],["path",{d:"M14 7l7 0l0 7",key:"svg-1"}]],P=h("outline","trending-up","TrendingUp",v),C=window.React.useEffect,R=window.React.useState,i=window.MantineCore.Alert,p=window.MantineCore.Badge,l=window.MantineCore.Card,c=window.MantineCore.Group,j=window.MantineCore.LoadingOverlay,O=window.MantineCore.SimpleGrid,E=window.MantineCore.Stack,e=window.MantineCore.Text,D=window.MantineCore.Title;function b({context:o}){const[n,k]=R(null),[z,d]=R(!0),[g,w]=R(null),m=o.context?.api_url,y=o.context?.part_id;C(()=>{if(!m||!y){w("Configuration error: Missing API URL or Part ID"),d(!1);return}fetch(m,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then(a=>{if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return a.json()}).then(a=>{k(a),d(!1)}).catch(a=>{console.error("Error fetching ROP details:",a),w(`Failed to load ROP data: ${a.message}`),d(!1)})},[m,y]);const _=a=>a>=80?"red":a>=60?"orange":a>=40?"yellow":"green";if(z)return React.createElement("div",{style:{position:"relative",minHeight:200}},React.createElement(j,{visible:!0}),React.createElement(e,{ta:"center",mt:"xl"},"Loading ROP analysis..."));if(g)return React.createElement(i,{icon:React.createElement(u,{size:"1rem"}),title:"Error",color:"red"},g);if(!n||!n.has_policy)return React.createElement(i,{icon:React.createElement(u,{size:"1rem"}),title:"No ROP Policy",color:"yellow"},React.createElement(e,null,n?.message||"No ROP policy configured for this part."));const r=n.policy,s=n.demand_statistics,t=n.suggestion;return React.createElement(E,{gap:"md"},React.createElement(c,{justify:"space-between"},React.createElement(D,{order:3},React.createElement(f,{size:"1.5rem",style:{marginRight:8,verticalAlign:"middle"}}),"Reorder Point Analysis"),t&&React.createElement(p,{size:"lg",color:_(t.urgency_score)},"Urgency: ",Math.round(t.urgency_score))),React.createElement(O,{cols:2,spacing:"md"},React.createElement(l,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0},React.createElement(e,{size:"sm",c:"dimmed"},"Current Stock"),React.createElement(e,{size:"xl",fw:700},Math.round(n.current_stock||0))),React.createElement(l,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0},React.createElement(e,{size:"sm",c:"dimmed"},"Reorder Point (ROP)"),React.createElement(e,{size:"xl",fw:700,c:"blue"},r?.last_calculated_rop!=null?Math.round(r.last_calculated_rop):"Not calculated")),React.createElement(l,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0},React.createElement(e,{size:"sm",c:"dimmed"},"Safety Stock"),React.createElement(e,{size:"xl",fw:700},r?.use_calculated_safety_stock&&s?.calculated_safety_stock!=null?Math.round(s.calculated_safety_stock):Math.round(r?.safety_stock||0))),React.createElement(l,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0},React.createElement(e,{size:"sm",c:"dimmed"},"On Order"),React.createElement(e,{size:"xl",fw:700},Math.round(n.on_order||0)))),s&&React.createElement(l,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0},React.createElement(E,{gap:"sm"},React.createElement(c,{justify:"space-between"},React.createElement(e,{fw:600},"Demand Analysis"),React.createElement(P,{size:"1.2rem"})),React.createElement(c,{justify:"space-between"},React.createElement(e,{size:"sm"},"Daily Demand Rate:"),React.createElement(e,{fw:600},s.mean_daily_demand.toFixed(2)," units/day")),React.createElement(c,{justify:"space-between"},React.createElement(e,{size:"sm"},"Demand Std Dev:"),React.createElement(e,{fw:600},s.std_dev_daily_demand.toFixed(2))),React.createElement(c,{justify:"space-between"},React.createElement(e,{size:"sm"},"Analysis Period:"),React.createElement(e,{fw:600},s.analysis_period_days," days (",s.total_removals," events)")),React.createElement(c,{justify:"space-between"},React.createElement(e,{size:"sm"},"Service Level:"),React.createElement(e,{fw:600},r?.service_level,"%")))),t&&React.createElement(l,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0},React.createElement(E,{gap:"sm"},React.createElement(c,{justify:"space-between"},React.createElement(e,{fw:600},"Active Suggestion"),React.createElement(p,{color:_(t.urgency_score)},"Score: ",Math.round(t.urgency_score))),React.createElement(c,{justify:"space-between"},React.createElement(e,{size:"sm"},"Suggested Order Qty:"),React.createElement(e,{fw:700,c:"green"},Math.round(t.suggested_order_qty))),React.createElement(c,{justify:"space-between"},React.createElement(e,{size:"sm"},"Projected Stock:"),React.createElement(e,{fw:600},Math.round(t.projected_stock))),t.days_until_stockout!=null&&React.createElement(c,{justify:"space-between"},React.createElement(e,{size:"sm"},"Days Until Stockout:"),React.createElement(e,{fw:700,c:t.days_until_stockout<=7?"red":t.days_until_stockout<=14?"orange":"green"},t.days_until_stockout<=0?"NOW":`${Math.round(t.days_until_stockout)} days`)),t.stockout_date&&React.createElement(c,{justify:"space-between"},React.createElement(e,{size:"sm"},"Stockout Date:"),React.createElement(e,{fw:600},new Date(t.stockout_date).toLocaleDateString())))),!t&&r?.last_calculated_rop!=null&&React.createElement(i,{icon:React.createElement(f,{size:"1rem"}),title:"Stock Status",color:"green"},React.createElement(e,null,"Stock level is adequate. No reorder needed at this time."),r.last_calculation_date&&React.createElement(e,{size:"sm",c:"dimmed",mt:"xs"},"Last calculated: ",new Date(r.last_calculation_date).toLocaleString())),!s&&!t&&React.createElement(i,{icon:React.createElement(u,{size:"1rem"}),title:"No Data",color:"gray"},React.createElement(e,null,"No demand statistics yet. ROP calculations require stock movement history.")))}function A(o){return M(o),React.createElement(b,{context:o})}export{A as renderROPAnalysisPanel};
//# sourceMappingURL=Panel.js.map
