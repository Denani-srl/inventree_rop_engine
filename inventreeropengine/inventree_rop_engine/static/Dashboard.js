import{c as p,a as f,I as o}from"./assets/RowActions-2sfIqMRK.js";/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"M6 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M17 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M17 17h-11v-14h-2",key:"svg-2"}],["path",{d:"M6 5l14 1l-1 7h-13",key:"svg-3"}]],T=p("outline","shopping-cart","ShoppingCart",w),u=window.MantineCore.Alert,y=window.MantineCore.Badge,C=window.MantineCore.Button,k=window.MantineCore.Group,_=window.MantineCore.LoadingOverlay,M=window.MantineCore.Stack,t=window.MantineCore.Table,n=window.MantineCore.Text,v=window.React.useEffect,i=window.React.useState;function P({context:r}){const[a,d]=i([]),[R,c]=i(!0),[s,m]=i(null),l=r.context?.api_url;v(()=>{if(!l){m("API URL not configured"),c(!1);return}fetch(l,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>{d(e.results||[]),c(!1)}).catch(e=>{console.error("Error fetching ROP suggestions:",e),m(`Failed to load suggestions: ${e.message}`),c(!1)})},[l]);const E=e=>e>=80?"red":e>=60?"orange":e>=40?"yellow":"green",h=e=>e===null?"Unknown":e<=0?React.createElement(n,{c:"red",fw:700},"NOW"):e<=7?React.createElement(n,{c:"orange",fw:700},e," days"):`${e} days`;return R?React.createElement("div",{style:{position:"relative",minHeight:200}},React.createElement(_,{visible:!0}),React.createElement(n,{ta:"center",mt:"xl"},"Loading ROP suggestions...")):s?React.createElement(u,{icon:React.createElement(o,{size:"1rem"}),title:"Error",color:"red"},s):a.length===0?React.createElement(u,{icon:React.createElement(o,{size:"1rem"}),title:"All Clear!",color:"green"},React.createElement(n,null,"No urgent reorder suggestions at this time.")):React.createElement(M,{gap:"md"},React.createElement(k,{justify:"space-between"},React.createElement(n,{size:"lg",fw:700},React.createElement(o,{size:"1.2rem",style:{marginRight:8,verticalAlign:"middle"}}),a.length," Part",a.length>1?"s":""," Requiring Attention")),React.createElement(t,{striped:!0,highlightOnHover:!0},React.createElement(t.Thead,null,React.createElement(t.Tr,null,React.createElement(t.Th,null,"Urgency"),React.createElement(t.Th,null,"Part"),React.createElement(t.Th,{ta:"right"},"Order Qty"),React.createElement(t.Th,{ta:"right"},"Current"),React.createElement(t.Th,null,"Stockout"),React.createElement(t.Th,null,"Supplier"),React.createElement(t.Th,null,"Action"))),React.createElement(t.Tbody,null,a.map(e=>React.createElement(t.Tr,{key:e.id,style:{cursor:"pointer"},onClick:()=>window.location.href=e.part_url},React.createElement(t.Td,null,React.createElement(y,{color:E(e.urgency_score)},Math.round(e.urgency_score))),React.createElement(t.Td,null,React.createElement("div",null,React.createElement(n,{fw:600},e.part_name),React.createElement(n,{size:"xs",c:"dimmed"},e.part_IPN||"No IPN"))),React.createElement(t.Td,{ta:"right"},React.createElement(n,{fw:700,c:"green"},Math.round(e.suggested_order_qty))),React.createElement(t.Td,{ta:"right"},Math.round(e.current_stock)),React.createElement(t.Td,null,h(e.days_until_stockout)),React.createElement(t.Td,null,React.createElement("div",null,React.createElement(n,{size:"sm"},e.supplier_name||"No supplier"),React.createElement(n,{size:"xs",c:"dimmed"},"Lead: ",e.lead_time_days||"?"," days"))),React.createElement(t.Td,{onClick:g=>g.stopPropagation()},React.createElement(C,{size:"xs",leftSection:React.createElement(T,{size:"1rem"}),onClick:()=>alert("Generate PO functionality coming soon")},"Order")))))))}function S(r){return f(r),React.createElement(P,{context:r})}export{S as renderROPDashboardItem};
//# sourceMappingURL=Dashboard.js.map
